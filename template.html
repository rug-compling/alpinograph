<!DOCTYPE html>
<html>
<!--WARNING-->

<head>
  <title>AlpinoGraph</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="main.css">
  <link rel="icon" href="../favicon.ico" type="image/ico">
  <script type="text/javascript" src="../jquery.js"></script>
  <script type="text/javascript">
    var qs = {};
    PART1;
    var corpus = '';
    var started = false;
    var haserror = false;
    var head = {};
    var hassentence = false;
    var lineno = 0;

    window._fn = {
      reset: function () {
        $('#error').text('').addClass('hide');
        $('#time').text('');
        $('#butZin').addClass('hide');
        $('#butTab').addClass('hide');
        $('#output1').text('').addClass('hide');
        $('#output2').text('').addClass('hide');
        $('#runner').removeClass('hide');
        $('#wait').removeClass('hide');
        started = false;
        haserror = false;
      },
      cp: function (name) {
        corpus = name;
      },
      header: function (h) {
        head = h;
      },
      row: function (r) {
        if (!started) {
          started = true;
          lineno = 0;
          if (r.sentence) {
            hassentence = true;
            $('#butZin').removeClass('hide').prop('disabled', true);
            $('#butTab').removeClass('hide').prop('disabled', false);
          } else {
            hassentence = false;
          }
          $('#output2').html('<table id="tab"></table>');
          var tr = $('<tr></tr>');
          tr.append($('<th></th>'));
          for (var i = 0; i < head.length; i++) {
            tr.append($('<th></th>').text(head[i].name));
          }
          $('#tab').append(tr);
          if (hassentence) {
            $('#output1').removeClass('hide').html('<ol id="lst"></ol>');
          } else {
            $('#output2').removeClass('hide');
          }
        }
        var tr = $('<tr></tr>');
        lineno = lineno + 1;
        tr.append($('<td></td>').text('' + lineno + '.'));
        for (var i = 0; i < r.fields.length; i++) {
          tr.append($('<td></td>').html(r.fields[i]));
        }
        $('#tab').append(tr);
        if (hassentence) {
          var a = $('<a href="bin/tree?' + r.args + '" target="_blank"></a>').html(r.sentence);
          $('#lst').append($('<li></li>').append(a));
        }
      },
      error: function (e) {
        $('#error').text(e).removeClass('hide');
        $('#time').text('');
        haserror = true;
      },
      time: function (t) {
        $('#time').text(t);
      },
      done: function () {
        $('#wait').addClass('hide');
        if (!started && !haserror) {
          $('#output1').removeClass('hide').text('Niets gevonden');
        }
      }
    }

    function q(tag) {
      /*
      $('#runner').addClass('hide');
      $('#error').text('').addClass('hide');
      $('#butZin').addClass('hide');
      $('#butTab').addClass('hide');
      $('#output1').text('').addClass('hide');
      $('#output2').text('').addClass('hide');
      */
      var el = document.forms['alpgform']
      el.elements['query'].value = qs[tag];
      el.scrollIntoView();
    }
    function formclear() {
      document.forms['alpgform'].elements['query'].value = '';
    }

    function showZin() {
      $('#butZin').prop('disabled', true);
      $('#butTab').prop('disabled', false);
      $('#output1').removeClass('hide');
      $('#output2').addClass('hide');
    }
    function showTab() {
      $('#butZin').prop('disabled', false);
      $('#butTab').prop('disabled', true);
      $('#output1').addClass('hide');
      $('#output2').removeClass('hide');
    }
  </script>
</head>

<body>
  <div class="nav">
    <input type="checkbox" id="menu" />
    <h1>AlpinoGraph</h1>
    <label for="menu" id="nav-icon">&#9776;</label>

    <div class="multi-level">
      <!--PART2-->
    </div>

  </div>

  <div id="main">
    <form id="alpgform" action="bin/alpg" method="post" accept-charset="utf-8"
      enctype="application/x-www-form-urlencoded" target="cframe">
      <p>
        Corpus:
        <select name="corpus">
          <optgroup label="&mdash; handmatig geannoteerde corpora &mdash;">
            <!--OPTMANUAL-->
          </optgroup>
          <optgroup label="&mdash; automatisch geannoteerde corpora &mdash;">
            <!--OPTAUTO-->
          </optgroup>
        </select>
      </p>
      <p>
        Query:<br>
        <textarea rows="20" name="query" id="query"></textarea>
      </p>
      <p>
        <input type="submit" value="Doen">
        <input type="button" value="Wissen" onClick="formclear(form)">
      </p>
    </form>
    <div id="error" class="hide"></div>
    <div id="runner" class="hide">
      <span id="wait"><img src="images/busy.gif" alt="busy"></span>
      <span id="time"></span><img src="images/leeg.png" alt="">
    </div>
    <button class="hide" id="butZin" onClick="showZin()">zinnen</button>
    <button class="hide" id="butTab" onClick="showTab()">tabel</button>
    <div id="output1" class="hide"></div>
    <div id="output2" class="hide"></div>
  </div>
  <div id="foot">
    <a href="doc/" target="_blank">help</a>
  </div>
  <iframe src="leeg.html" id="cframe" name="cframe" class="hide"></iframe>
</body>

</html>
